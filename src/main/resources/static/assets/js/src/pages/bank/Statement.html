<template id="statement-template">
  <div class="max-w-3xl mx-auto py-16 px-6">
    <router-link 
      to="/bank" 
      class="fixed bottom-4 right-4 w-12 h-12 rounded-full bg-primary text-brand flex items-center justify-center shadow-lg"
    >
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true" class="size-6">
        <path d="M14.75 19.5l-7.5-7.5 7.5-7.5" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
    </router-link>

    <!-- Título -->
    <h2 class="text-center text-2xl font-semibold mb-2">
      Consulta de Extrato Bancário
    </h2>

    <p class="text-center text-gray-500 mb-10 max-w-xl mx-auto">
      Utilize os filtros abaixo para consultar o extrato de uma conta bancária.
    </p>

    <!-- Filtros -->
    <form @submit.prevent="handleSubmit" class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-10">
      <!-- Número da conta -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Número da conta</label>
        <input type="number" name="nrConta" readonly v-model="numeroConta" placeholder="000000" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 opacity-50 cursor-not-allowed bg-gray-200">
      </div>

      <!-- Tipo do extrato -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Tipo do extrato</label>
        <select name="tipo" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
          <option value="">SELECIONE</option>
          <option value="RECEBIDO">Recebido</option>
          <option value="ENVIADO">Transferências</option>
          <option value="COMPLETO">Completo</option>
        </select>
      </div>

      <!-- Data inicial -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Data inicial</label>
        <input type="date" name="inicio" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
      </div>

      <!-- Data final -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Data final</label>
        <input type="date" name="fim" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
      </div>

      <div>
        <label class="block text-sm font-medium mb-1 opacity-0">send</label>
        <button type="submit" class="w-full bg-primary text-white py-2 rounded-lg font-medium">
          Consultar
        </button>
      </div>
    </form>

    <div class="errors mt-5">
      <div
        class="p-4 px-6 mb-3 bg-red-700 items-center text-indigo-100 leading-none rounded-full flex lg:inline-flex w-full"
        v-for="e in errors"
        role="alert"
      >
        <span class="font-normal text-left flex-auto text-white">
          {{ e }}
        </span>
      </div>
    </div>

    <!-- Título lista -->
    <p class="text-sm text-gray-500 mb-4" v-if="transferencias.length > 0">
      Resultados do extrato bancário
    </p>

    <hr class="border-gray-200 mb-2" v-if="transferencias.length > 0">

    <!-- Lista de extratos -->
    <ul class="space-y-6" v-if="transferencias.length > 0">

      <!-- Item extrato -->
      <li v-for="t in transferencias">
        <div class="flex items-center justify-between">
          <div>
            <p class="font-medium text-gray-800">
              {{ formatarData(t.dataOperacao) }}
              {{ tipoOperacao(t) == 'recebido' ? "— Recebido via TED" : "— Enviado" }}
              {{ tipoOperacao(t) == 'recebido' ? "por " + t.origem.fullName : "para " + t.destino.fullName }}<br>
              <small>{{ isAgendado(t.dataAgendamento) ? "Agendado para " + formatarData(t.dataAgendamento) : "" }}</small>
            </p>
            <p class="text-gray-500 text-sm">Crédito</p>
          </div>

          <p
            class="font-semibold "
            :class="tipoOperacao(t) == 'recebido' ? 'text-green-600' : 'text-red-600'"
          >
            {{ tipoOperacao(t) == 'recebido' ? "+" : "-" }} {{ formatarMoeda( tipoOperacao(t) == 'recebido' ? t.valor : t.valorOperacao ) }}
          </p>
        </div>
        <hr class="border-gray-200 mt-4">
      </li>
    </ul>

    <!-- Paginação -->
    <div class="mt-10 flex justify-center gap-2" v-if="transferencias.length > 0">
      <button class="px-3 py-1 border border-gray-300 rounded hover:bg-gray-100 opacity-50 cursor-not-allowed bg-gray-200" disabled>&laquo;</button>
      <button class="px-3 py-1 border border-primary bg-primary text-white rounded opacity-50 cursor-not-allowed bg-gray-200" disabled>1</button>
      <button class="px-3 py-1 border border-gray-300 rounded hover:bg-gray-100 opacity-50 cursor-not-allowed bg-gray-200" disabled>2</button>
      <button class="px-3 py-1 border border-gray-300 rounded hover:bg-gray-100 opacity-50 cursor-not-allowed bg-gray-200" disabled>3</button>
      <button class="px-3 py-1 border border-gray-300 rounded hover:bg-gray-100 opacity-50 cursor-not-allowed bg-gray-200" disabled>&raquo;</button>
    </div>

    <p class="text-center text-gray-700 mt-10 max-w-xl mx-auto" v-if="transferencias.length == 0">
      Não há transferências para serem exibidas nos filtros selecionados.
    </p>
  </div>
</template>